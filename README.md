# ivchenkov.yap

## AmesHousing Prediction project

The goal of this project is to create a service
for predicting real estate prices and is based on AmesHousing dataset.
The work was done as part of the course 'Software Engineering in Machine Learning' in MIPT.

GitLab Pages Website: https://se_ml_course.gitlab.io/2021/ivchenkov.yap

## Data Description

AmesHousing Dataset: http://jse.amstat.org/v19n3/decock/AmesHousing.txt

Paper: http://jse.amstat.org/v19n3/decock.pdf


## Installation

First, clone this repository.

```shell
git clone https://gitlab.com/se_ml_course/2021/ivchenkov.yap
```

Next, install this project.

```shell
python setup.py install
```

### Dependencies

All dependencies for basic usage and testing are listed in ``requirements.txt`` and ``requirements-test.txt`` respectively. 

To install basic dependencies, run:

``` 
pip install -r requirements.txt 
``` 

To install test dependencies, run:

``` 
pip install -r requirements-test.txt 
```

## Usage

Functional part of this project contains three scripts responsible for different parts of interacting with data and model. Following is their description and basic examples of usage.

### split.py
Script creating train and test samples following particular format, and saving them in csv format. Takes as input raw ``AmesHousing.txt`` dataset.

```shell
python scripts/split.py -d ./data/AmesHousing.txt -o ./data
```

### train.py 

Script for training a model, takes as input train samples in csv forma generated by ``split.py``. As a result, pickles trained model in specified location.

```shell
python scripts/train.py -d ./data/train.csv -o ./models/model.pk
```

### test.py 

Script for model evaluation. The model for evaluation should be generated by ``train.py`` and test samples should be generated by ``split.py``. This script outputs to stdout R<sup>2</sup> and MSLE values.

```shell
python scripts/test.py -m ./models/model.pk -d ./data/test.csv
```

## Tests

Tests are created using ``pytest``. If you aren't familiar with it, check out [their website](https://docs.pytest.org/en/stable/).

To run full test suit:

```shell
pytest test
```

Also, you can check code coverage using ``coverage`` and, specifically, its plugin for pytest, ``pytest-cov``:

```shell
pytest --cov=housinglib --cov-branch --cov-report term-missing test
```

## Results 

R<sup>2</sup> on test dataset (0.2 of all dataset): 0.903 

MSE on test dataset (while predicting log target) 0.0152

# ames_housing Docker container

This project also provides Docker container with basic functions and their Flask interface.

## Getting Started

Following instructions will cover usage information for the ames_housing container.

### Prerequisites

In order to run this container you'll need Docker installed.

* [Windows](https://docs.docker.com/windows/started)
* [OS X](https://docs.docker.com/mac/started/)
* [Linux](https://docs.docker.com/linux/started/)

### Usage

#### Container Parameters

Run Flask app

```shell
docker run -d -p 5000:5000 registry.gitlab.com/se_ml_course/2021/ivchenkov.yap:latest
```

#### Useful File Locations

* `/scripts/train.py` - model training script

* `/scripts/test.py` - model testing script
 
* `/scripts/split.py` - creation of train/test samples script
  
* `/src/housinglib` - library directory

## Built With

* Python 3.9.2
* Python libraries, complete list of which is in requirements.txt

## Find Me

* [GitHub](https://github.com/vinnibuh/AmesHousing)

For the versions available, see the 
[tags on this repository](https://gitlab.com/se_ml_course/2021/ivchenkov.yap).

## Authors

* **Ivchenkov Yaroslav**
